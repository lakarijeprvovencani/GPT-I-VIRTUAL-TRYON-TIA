(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{774:(e,r,t)=>{Promise.resolve().then(t.bind(t,9570))},9570:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var l=t(5155),s=t(2115);function a(){let[e,r]=(0,s.useState)(null),[t,a]=(0,s.useState)(null),[i,n]=(0,s.useState)(null),[o,d]=(0,s.useState)(!1),[c,u]=(0,s.useState)(null),x=(0,s.useRef)(null),h=(0,s.useRef)(null),m=(e,r)=>{var t;let l=null==(t=e.target.files)?void 0:t[0];if(l&&l.type.startsWith("image/")){let e=new FileReader;e.onload=e=>{var t;r({file:l,preview:null==(t=e.target)?void 0:t.result})},e.readAsDataURL(l),u(null)}},g=async()=>{if(!e)return void u("Molimo uploadujte svoju fotografiju");d(!0),u(null);try{let r=new FormData;r.append("userPhoto",e.file),t&&r.append("clothingPhoto",t.file);let l=await fetch("/api/virtual-try-on",{method:"POST",body:r}),s=(l.headers.get("content-type")||"").toLowerCase();if(!l.ok){let e="";try{e=(await l.json()).error||"Greška"}catch(r){e=await l.text()}throw Error(e)}if(s.includes("image/")){let e=await l.blob(),r=URL.createObjectURL(e);n(r)}else if(s.includes("application/json")){let e=await l.json();u(e.message||"Model je vratio tekstualnu poruku umesto slike")}else{let e=await l.text();throw Error("Neočekivan HTML odgovor (verovatno pogrešan URL /api). "+e.slice(0,300))}}catch(e){u(e instanceof Error?e.message:"Greška pri generisanju slike")}finally{d(!1)}};return(0,l.jsx)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Vaša fotografija *"}),(0,l.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors",children:[(0,l.jsx)("input",{ref:x,type:"file",accept:"image/*",onChange:e=>m(e,r),className:"hidden"}),e?(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("img",{src:e.preview,alt:"User photo",className:"w-32 h-32 object-cover rounded-lg mx-auto"}),(0,l.jsx)("button",{onClick:()=>r(null),className:"text-red-600 hover:text-red-800 text-sm",children:"Ukloni sliku"})]}):(0,l.jsx)("button",{onClick:()=>{var e;return null==(e=x.current)?void 0:e.click()},className:"text-blue-600 hover:text-blue-800 font-medium",children:"Kliknite za upload fotografije"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Fotografija odeće (opciono)"}),(0,l.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors",children:[(0,l.jsx)("input",{ref:h,type:"file",accept:"image/*",onChange:e=>m(e,a),className:"hidden"}),t?(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("img",{src:t.preview,alt:"Clothing photo",className:"w-32 h-32 object-cover rounded-lg mx-auto"}),(0,l.jsx)("button",{onClick:()=>a(null),className:"text-red-600 hover:text-red-800 text-sm",children:"Ukloni sliku"})]}):(0,l.jsx)("button",{onClick:()=>{var e;return null==(e=h.current)?void 0:e.click()},className:"text-gray-500 hover:text-gray-700 text-sm",children:"Kliknite za upload fotografije odeće"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:g,disabled:!e||o,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:o?"Generisanje...":"Generiši Virtual Try-On"}),(0,l.jsx)("button",{onClick:()=>{r(null),a(null),n(null),u(null),x.current&&(x.current.value=""),h.current&&(h.current.value="")},className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]}),c&&(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:c})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Rezultat"}),(0,l.jsx)("div",{className:"border-2 border-gray-200 rounded-lg p-6 min-h-[400px] flex items-center justify-center",children:o?(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Generisanje slike..."})]}):i?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("img",{src:i,alt:"Generated virtual try-on",className:"w-full h-auto rounded-lg shadow-lg"}),(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)("a",{href:i,download:"virtual-try-on.png",className:"inline-block bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors",children:"Preuzmi sliku"})})]}):(0,l.jsxs)("div",{className:"text-center text-gray-500",children:[(0,l.jsx)("p",{children:'Uploadujte fotografiju i kliknite "Generiši"'}),(0,l.jsx)("p",{className:"text-sm mt-2",children:"Rezultat će se prikazati ovde"})]})})]})]})})}function i(){return(0,l.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,l.jsxs)("div",{className:"text-center mb-12",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Virtual Try-On"}),(0,l.jsx)("p",{className:"text-xl text-gray-600",children:"Isprobajte odeću na sebi koristeći AI tehnologiju"})]}),(0,l.jsx)(a,{})]})})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=774)),_N_E=e.O()}]);